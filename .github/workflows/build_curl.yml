name: Auto Build Curl
on: 
   workflow_dispatch:
   repository_dispatch:
    types: start auto build Curl
jobs:
  build:
    runs-on: ubuntu-latest
    steps:
    - name: 拉取源代码
      run: |
        wget "https://curl.haxx.se/download/curl-7.72.0.tar.xz"
        tar pxvf curl-7.72.0.tar.xz
    - name: Build
      run: |
        cd curl-7.72.0
        apt update && apt install -y openssl-devel
        pwd
        ls
        CFLAGS=-static ./configure --prefix=/usr --disable-shared --enable-static --without-libidn --without-librtmp --without-zlib --without-winidn --disable-rtsp --disable-ldap --disable-ldaps
        make
        echo "目录"
        ls src/
        
        echo "成功"
        
    - name: Store generated APK file
      uses: actions/upload-artifact@v1
      with:
        name: curl
        path: ./curl-7.72.0/src/curl

